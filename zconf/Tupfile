include_rules

CPPFLAGS += -DLKC_DIRECT_LINK
CPPFLAGS += -I$(TUP_CWD)
CFLAGS += -g
CFLAGS += -O2
CFLAGS += -Wall

# Generate scanner/parser
: zconf.l |> !lex |> lex.%B.c
: zconf.y |> !yacc |> %B.tab.c
: zconf.gperf |> !gperf |> %B.hash.c

# Create archive
: foreach images.c kconfig_load.c zconf.tab.c | zconf.hash.c lex.zconf.c |> !cc |> %B.o {objs}
: {objs} |> !archive |> libzconf.a
